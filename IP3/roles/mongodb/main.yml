- name: Pull MongoDB Docker image
  community.docker.docker_image:
    name: "{{ mongo_image }}"
    source: pull

- name: Run MongoDB container
  community.docker.docker_container:
    name: yolo-mongodb
    image: "{{ mongo_image }}"
    state: started
    restart: yes
    published_ports:
      - "{{ mongo_port }}:27017"
    networks:
      - name: "{{ docker_network }}"
    healthcheck:
      test: ["CMD", "mongo", "--eval", "db.adminCommand('ping')"]
      interval: 10s
      timeout: 5s
      retries: 5